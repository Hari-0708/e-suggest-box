<!DOCTYPE html>
<html lang="en">
<head>
    <title>Suggestion</title>
</head>
<body>
    <div>
        <form action="/suggest" method="post" id="container">
            <input type="hidden" name="dno" value= <%= dno  %> >
            Choose Category <br>
            <select name="category" id="generate" onchange="addFaculty(this)">
                <option value="department">Department</option>
                <option value="faculty">Faculty</option>
                <option value="infrastructure">Infrastructure</option>
            </select><br> 
            <label id="msg-label">Message</label> <br>
            <textarea name="message" id="" cols="30" rows="10"></textarea>
            <input type="submit" value="Submit">
        </form>
    </div>

    <script type="text/javascript">
        console.log("Connected to changes js file.")

        function addFaculty(control) {

            if( control.value == "faculty"){ 


                let container = document.getElementById("container");

                var values = ["Arul", "Priya", "Krishanth", "Dorathy", "Subash"];
                var lineBreak = document.createElement("br");
                
                var select = document.createElement("select");
                select.name = "staff";
                select.id = "staff"

                for (const val of values)
                {
                    var option = document.createElement("option");
                    option.value = val;
                    option.text = val.charAt(0).toUpperCase() + val.slice(1);
                    select.appendChild(option);
                }

                var label = document.createElement("label");
                label.innerHTML = "Choose your Staff: "
                label.htmlFor = "staff";

                container.insertBefore(label, document.getElementById("msg-label"));
                label.appendChild(document.createElement("br"));
                container.insertBefore(select, document.getElementById("msg-label"));
                container.insertBefore(lineBreak, document.getElementById("msg-label"));
            }

        }
    </script>
</body>
</html>